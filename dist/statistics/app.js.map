{"version":3,"sources":["/tpl/statistics/index.tsx","/tpl/common/antd/localeProvider.ts","/tpl/statistics/common/appStateStore.tsx","/tpl/statistics/routes.tsx","/tpl/statistics/page/layoutBase.tsx","/tpl/common/antd/layout.ts","/tpl/common/antd/menu.ts","/tpl/common/component/radium_style.tsx","/tpl/common/radium.ts","/tpl/statistics/common/publicData.tsx","/tpl/statistics/page/routes.tsx","/tpl/statistics/page/statistics/server/index.tsx"],"names":[],"mappings":"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","file":"","sourcesContent":["import { LocaleProvider, zhCNC } from 'common/antd/localeProvider';\nimport * as moment from 'moment';\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport { AppStateProvider } from './common/appStateStore';\nimport { routes } from './routes';\n\nmoment.locale('zh-cn');\n\nrender(\n    <LocaleProvider locale={zhCNC}>\n        <AppStateProvider>\n            {routes}\n        </AppStateProvider>\n    </LocaleProvider>,\n    document.getElementById('reactApp'));\n","import C from 'antd/lib/locale-provider';\nimport 'antd/lib/locale-provider/style/css';\nimport zhCN from 'antd/lib/locale-provider/zh_CN';\nimport 'common/antd/default-style.css';\nimport 'moment/locale/zh-cn';\nexport const LocaleProvider: typeof C = require('antd/lib/locale-provider');\nexport const zhCNC: typeof zhCN = zhCN;\n","import { observable } from 'mobx';\nimport { inject, Provider } from 'mobx-react';\nimport * as React from 'react';\n\nexport class AppStateStore {\n    @observable appState: {\n        currentUser?: {\n            permissions?: string[],\n        },\n    };\n\n    constructor() {\n        this.appState = {\n            currentUser: {\n                permissions: ['guest'],\n            },\n        };\n    }\n\n}\n\nexport interface WithAppState {\n    data: AppStateStore;\n}\n\nexport class AppStateProvider extends React.Component<{}, {}> {\n    private store: AppStateStore;\n    constructor(props: any) {\n        super(props);\n        this.store = new AppStateStore();\n    }\n    render() {\n        return (\n            <Provider data={this.store}>\n                {this.props.children}\n            </Provider>\n        );\n    }\n}\n\nexport function withAppState<P>(\n    UnderlyingComponent: React.ComponentClass<P & WithAppState>\n        | React.StatelessComponent<P & WithAppState>)\n    : React.ComponentClass<P> {\n    return inject('data')(UnderlyingComponent as any);\n}\n","import * as React from 'react';\nimport {\n    BrowserRouter as Router,\n    Route,\n    Switch,\n} from 'react-router-dom';\nimport { LayoutBase } from './page/layoutBase';\n\nexport const routes = (\n    <Router>\n        <Switch>\n            <Route path='/' component={LayoutBase} />\n        </Switch>\n    </Router>\n);\n","import { Icon } from 'common/antd/icon';\nimport { Layout } from 'common/antd/layout';\nimport { Menu } from 'common/antd/menu';\nimport { Link } from 'common/component/Link';\nimport { RadiumStyle } from 'common/component/radium_style';\nimport { Radium } from 'common/radium';\nimport * as _ from 'lodash';\nimport { observer } from 'mobx-react';\nimport * as React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { withAppState, WithAppState } from 'statistics/common/appStateStore';\nimport { Nav, NavProps } from '../common/publicData';\nimport { routes } from './routes';\n\nconst { Header, Content, Footer } = Layout;\n\n@Radium\n@observer\nexport class LayoutBaseView extends React.Component<RouteComponentProps<any> & WithAppState> {\n\n    constructor(props: any) {\n        super(props);\n    }\n\n    render() {\n        const pathArr = this.props.location.pathname.split('/');\n        const selectedKeys = pathArr.length > 2 ? [pathArr.slice(0, 3).join('/')] : [`${this.props.location.pathname}`];\n\n        return (\n            <Layout>\n                <RadiumStyle scopeSelector={['.statistics']}\n                    rules={{\n                        '#reactApp': {\n                            backgroundColor: '#f0f2f5 !important',\n                        },\n                    }} />\n                <Header style={{ position: 'fixed', zIndex: 1, width: '100%', height: 'auto' }}>\n                    <Menu\n                        theme='dark'\n                        mode='horizontal'\n                        selectedKeys={selectedKeys}\n                        style={{ lineHeight: '64px' }}\n                        onClick={(item) => {\n                            this.props.history.push(item.key.replace('.$', ''));\n                        }}\n                    >\n                        {this.makeMenuItem(Nav[0].children, '/statistics')}\n                    </Menu>\n                </Header>\n                <Content id='fixSelect' style={{ padding: '0 50px', marginTop: 64 }}>\n                    <div style={{\n                        minHeight: 380,\n                        marginTop: '16px',\n                        background: '#fff',\n                        overflow: 'auto',\n                    }}>\n                        {routes}\n                    </div>\n                </Content>\n                <Footer style={{ textAlign: 'center' }}>\n                </Footer>\n            </Layout>\n        );\n    }\n\n    private makeMenuItem = (menuList: NavProps[], parentUrl?: string) => {\n        return menuList.map((r: NavProps, i: number) => {\n            const url = `${parentUrl || ''}/${r.url}`;\n            const title = r.title;\n\n            if (r.children && r.children.length > 0) {\n                return (\n                    <Menu.SubMenu\n                        key={url}\n                        title={<span>{title}</span>}\n                    >\n                        {this.makeMenuItem(r.children, url)}\n                    </Menu.SubMenu>\n                );\n            }\n\n            return (\n                <Menu.Item key={url}>\n                    <span>{title}</span>\n                </Menu.Item>\n            );\n        });\n    }\n\n}\n\nexport const LayoutBase = withRouter(withAppState(LayoutBaseView));\n","import C from 'antd/lib/layout';\nimport 'antd/lib/layout/style/css';\nimport 'common/antd/default-style.css';\nexport const Layout: typeof C = require('antd/lib/layout');\n","import C from 'antd/lib/menu';\nimport 'antd/lib/menu/style/css';\nimport 'common/antd/default-style.css';\nexport const Menu: typeof C = require('antd/lib/menu').default;\n","import { Radium } from 'common/radium';\nimport * as React from 'react';\n\n/**\n * scopeSelector 格式必须 site 开头  例如：[`${site}`, `${site}.${app}`, `${site}.${app}.xxx`]\n */\ninterface Props {\n    rules: React.CSSProperties | any;\n    scopeSelector: string[];\n}\n\nconst Style: any = Radium.Style;\n\n@Radium\nexport class RadiumStyle extends React.Component<Props, {}> {\n    render() {\n        return (\n            <div>\n                {\n                    this.props.scopeSelector ?\n                        this.props.scopeSelector.length === 0 ?\n                            <Style rules={this.props.rules} />\n                            :\n                            (this.props.scopeSelector || []).map((r, i) => {\n                                return <Style key={i} scopeSelector={r} rules={this.props.rules} />;\n                            }) : null\n                }\n                {this.props.children}\n            </div>\n        );\n    }\n}\n","import * as radium from 'radium';\nexport const Radium = radium.default;\n","export interface NavProps {\n    title: string;\n    url: string;\n    children?: NavProps[];\n}\n\nexport const Nav: NavProps[] = [\n    {\n        title: '基础数据',\n        url: 'statistics',\n        children: [\n            {\n                title: '服务器集群',\n                url: 'server',\n            },\n        ],\n    },\n];\n","\nimport * as React from 'react';\nimport {\n    Redirect,\n    Route,\n} from 'react-router-dom';\nimport { Server } from './statistics/server/index';\n\nexport const routes = (\n    <div>\n        <Route\n            exact\n            path='/'\n            render={() => <Redirect to='/statistics/server' />}\n        />\n        <Route exact path='/statistics/server' component={Server} />\n    </div>\n);\n","import { Radium } from 'common/radium';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { fabric } from 'fabric';\nimport { IRectOptions } from 'fabric/fabric-impl';\n\n@Radium\nclass ServerView extends React.Component<RouteComponentProps<any>, {}> {\n    private PROPORTION = { width: 1, height: 1 };\n    private canvas: fabric.Canvas;\n\n    /**\n     * 获取文档的大小\n     */\n    get clientRect() {\n        const width = document.documentElement.clientWidth\n        const height = document.documentElement.clientHeight\n        return {\n            width,\n            height\n        }\n    }\n\n    constructor(props: any) {\n        super(props);\n    }\n\n    componentDidMount() {\n        this.canvas = new fabric.Canvas('an');\n        window.addEventListener('resize', this.handleWindowResize)\n        this.handleWindowResize();\n        this.drowRect();\n        this.drowPath();\n        this.canvas.on('mouse:dblclick', (e) => {\n            console.log(e);\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                <canvas id='an'></canvas>\n            </div>\n        );\n    }\n\n    /**\n     * 处理window `resize`事件\n     * @param factor draw 画布大小计算缩放比例\n     */\n    private handleWindowResize = (e?: Event, factor = this.PROPORTION) => {\n        const { width, height } = this.getCanvasSize(factor);\n        this.canvas.setDimensions({\n            width,\n            height\n        });\n    }\n\n    /**\n     * 获取画布大小\n     * @param factor draw 画布大小计算缩放比例\n     */\n    private getCanvasSize = (factor = this.PROPORTION) => {\n        const { width, height } = this.clientRect;\n\n        return {\n            width: (width - 188) * factor.width,\n            height: (height - 60 * 2) * factor.height\n        }\n    }\n\n    private drowRect(config: IRectOptions) {\n        var rect = new fabric.Rect(Object.assign({}, {\n            left: 100,\n            top: 50,\n            fill: '#D81B60',\n            width: 50,\n            height: 50,\n            strokeWidth: 2,\n            stroke: \"#880E4F\",\n            rx: 10,\n            ry: 10,\n            angle: 45,\n            scaleX: 3,\n            scaleY: 3,\n            hasControls: true,\n            // evented: false,\n            // selectable: false\n        }, config));\n\n        this.canvas.add(rect);\n    }\n\n    private drowPath() {\n        var line = new fabric.Path('M 65 0 Q 100, 100, 200, 0', { fill: '', stroke: 'black', objectCaching: false });\n    }\n}\n\nexport const Server = withRouter(ServerView);\n"]}